{% extends "base.html" %}

{% block title %}Balance Sheet{% endblock %}

{% block content %}
<h2>Balance Sheet</h2>
<h3>For the Period Ended {{ report.period_end.strftime('%Y-%m-%d') }}</h3>
<p>Company: {{ report.company }}</p>

<div class="row">
    <div class="col-md-6">
        <h4>Assets</h4>
        {% for category, accounts in report.assets.items() %}
            <h5>{{ category }}</h5>
            <ul class="list-group mb-2">
                {% for name, amount in accounts.items() %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ name }}
                        <span>{{ "%.2f"|format(amount) }}</span>
                    </li>
                {% endfor %}
            </ul>
        {% endfor %}
        <h4 class="mt-3">Total Assets: {{ "%.2f"|format(report.total_assets) }}</h4>
    </div>
    <div class="col-md-6">
        <h4>Liabilities</h4>
        {% for category, accounts in report.liabilities.items() %}
            <h5>{{ category }}</h5>
            <ul class="list-group mb-2">
                {% for name, amount in accounts.items() %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ name }}
                        <span>{{ "%.2f"|format(amount) }}</span>
                    </li>
                {% endfor %}
            </ul>
        {% endfor %}
        <h4 class="mt-3">Total Liabilities: {{ "%.2f"|format(report.total_liabilities) }}</h4>

        <h4 class="mt-4">Equity</h4>
        <ul class="list-group mb-2">
            {% for name, amount in report.equity.items() %}
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    {{ name }}
                    <span>{{ "%.2f"|format(amount) }}</span>
                </li>
            {% endfor %}
        </ul>
        <h4 class="mt-3">Total Equity: {{ "%.2f"|format(report.total_equity) }}</h4>
    </div>
</div>

<h3 class="mt-4">Total Liabilities & Equity: {{ "%.2f"|format(report.total_liabilities + report.total_equity) }}</h3>
{% if report.balance_check %}
    <p class="text-success">Balance Check: Assets = Liabilities + Equity</p>
{% else %}
    <p class="text-danger">Balance Check Failed!</p>
{% endif %}

<a href="{{ url_for('general_ledger.financial_statements_dashboard') }}" class="btn btn-secondary mt-3">Back to Financial Statements</a>
{% endblock %}